na.omit() %>%
top_n(15)
View(trgt_sub)
# Target subtype
trgt_sub <- df %>%
group_by(targsubtype1_txt) %>%
count(sort = T) %>%
na.omit() %>%
top_n(15,n)
View(trgt_sub)
# Target subtype
trgt <- df %>%
group_by(targtype1_txt) %>%
count(sort = T) %>%
na.omit()
View(trgt)
# number of casualties per country
kill <- df %>%
select(country_txt,nkill)
View(kill)
# number of casualties per country
kill <- df %>%
select(country_txt,nkill) %>%
group_by(country_txt) %>%
summarise(total = sum(nkill))
View(kill)
kill <- df %>%
select(country_txt,nkill)
View(kill)
# number of casualties per country
kill <- df %>%
filter(iyear >= 2001) %>%
select(country_txt,nkill) %>%
group_by(country_txt) %>%
summarise(total = sum(nkill))
View(kill)
# number of casualties per country
kill <- df %>%
filter(iyear >= 2001) %>%
select(country_txt,nkill) %>%
group_by(country_txt) %>%
summarise(total = sum(nkill, na.rm = T))
View(df)
View(kill)
# number of casualties per country
kill <- df %>%
filter(iyear >= 2001) %>%
select(country_txt,nkill) %>%
group_by(country_txt) %>%
summarise(total = sum(nkill, na.rm = T)) %>%
arrange(desc(total))
View(kill)
# Attack type
weapons <- df %>%
filter(iyear >= 2001) %>%
group_by(attacktype1_txt) %>%
count(sort = T)
# Target subtype
trgt <- df %>%
filter(iyear >= 2001) %>%
group_by(targtype1_txt) %>%
count(sort = T) %>%
na.omit()
# target type
trgt_sub <- df %>%
filter(iyear >= 2001) %>%
group_by(targsubtype1_txt) %>%
count(sort = T) %>%
na.omit()
# number of casualties per country
kill <- df %>%
filter(iyear >= 2001) %>%
select(country_txt,nkill) %>%
group_by(country_txt) %>%
summarise(total = sum(nkill, na.rm = T)) %>%
arrange(desc(total))
View(weapons)
View(trgt_sub)
View(trgt)
View(kill)
View(weapons)
# kills per year
year_kill <- df %>%
filter(iyear >= 2001) %>%
select(iyear,nkill) %>%
group_by(iyear) %>%
summarise(total = sum(nkill,na.rm = T))
View(year_kill)
# group caused most casualities
kill_group <- df %>%
filter(iyear >= 2001) %>%
select(gname,nkill) %>%
group_by(gname) %>%
summarise(total = sum(nkill, na.rm = T)) %>%
arrange(desc(total))
View(kill_group)
View(year_kill)
View(weapons)
# number of attacks per year
year_attacks <- df %>%
filter(iyear >= 2001) %>%
select(iyear) %>%
count()
View(year_attacks)
# number of attacks per year
year_attacks <- df %>%
filter(iyear >= 2001) %>%
select(iyear) %>%
group_by(iyear)
# number of attacks per year
year_attacks <- df %>%
filter(iyear >= 2001) %>%
select(iyear) %>%
group_by(iyear) %>%
count()
View(year_attacks)
ggplot(year_attacks(aes(y=n,x=iyear))) +
geom_line()
# number of attacks per year (line plot)
year_attacks <- df %>%
filter(iyear >= 2001) %>%
select(iyear) %>%
group_by(iyear) %>%
count()
ggplot(year_attacks,aes(y=n,x=iyear)) +
geom_line()
View(year_kill)
ggplot(year_attacks,aes(y=n,x=iyear)) +
geom_line() +
geom_line(year_kill,aes(y=total,x=iyear))
ggplot(year_attacks,aes(y=n,x=iyear)) +
geom_line() +
geom_line(year_kill,aes(y=total))
p <- ggplot(year_attacks,aes(y=n,x=iyear)) +
geom_line()
p +
geom_line(year_kill,aes(y=total))
p +
geom_line(year_kill,aes(y=total,x=iyear))
p +
geom_line(year_kill,aes(y=total,x=iyear))
p +
geom_line(year_kill,aes(y=total,x=iyear))
df2 <- merge(year_attacks,year_kill, by = iyear)
df2 <- merge(year_attacks,year_kill, by = "iyear")
p <- ggplot(df2,aes(y=n,x=iyear)) +
geom_line() +
geom_line(aes(y=total))
ggplot(df2,aes(y=n,x=iyear)) +
geom_line() +
geom_line(aes(y=total))
library(readxl)
library(dplyr)
df <- read_xlsx("globalterrorismdb_0919dist.xlsx")
# Attack type
weapons <- df %>%
filter(iyear >= 2001) %>%
group_by(attacktype1_txt) %>%
count(sort = T)
write.csv(weapons,"attacktype.csv")
# Attack type
weapons <- df %>%
filter(iyear >= 2001) %>%
group_by(attacktype1_txt) %>%
count(sort = T) %>%
rename(count = n) %>%
ungroup()
View(weapons)
write.csv(weapons,"attacktype.csv",sep = ",")
?write.csv
write.csv2(weapons,"attacktype.csv",)
write.csv2(weapons,"attacktype.csv")
# Target subtype
trgt <- df %>%
filter(iyear >= 2001) %>%
group_by(targtype1_txt) %>%
count(sort = T) %>%
na.omit()
View(trgt)
# Target subtype
trgt <- df %>%
filter(iyear >= 2001) %>%
group_by(targtype1_txt) %>%
count(sort = T) %>%
na.omit() %>%
rename(count = n,
target = targtype1_txt) %>%
ungroup()
View(trgt)
write.csv(trgt,"target_type.csv", row.names = F)
# target type
trgt_sub <- df %>%
filter(iyear >= 2001) %>%
group_by(targsubtype1_txt) %>%
count(sort = T) %>%
na.omit()
View(trgt_sub)
View(trgt)
View(trgt_sub)
# number of casualties per country (as map)
kill <- df %>%
filter(iyear >= 2001) %>%
select(country_txt,nkill) %>%
group_by(country_txt) %>%
summarise(total = sum(nkill, na.rm = T)) %>%
arrange(desc(total))
View(kill)
# number of casualties per country (as map)
kill <- df %>%
filter(iyear >= 2001) %>%
select(country_txt,nkill) %>%
group_by(country_txt) %>%
summarise(total = sum(nkill, na.rm = T)) %>%
arrange(desc(total)) %>%
rename(country = country_txt,
casualties = total) %>%
ungroup()
View(kill)
# group caused most casualties barplot
kill_group <- df %>%
filter(iyear >= 2001) %>%
select(gname,nkill) %>%
group_by(gname) %>%
summarise(total = sum(nkill, na.rm = T)) %>%
arrange(desc(total))
View(kill_group)
View(kill_group)
# number of attacks per year (line plot)
year_attacks <- df %>%
filter(iyear >= 2001) %>%
select(iyear) %>%
group_by(iyear) %>%
count() %>%
ungroup() %>%
rename(group = gname) %>%
filter(gname != "Unknown")
# group caused most casualties barplot
kill_group <- df %>%
filter(iyear >= 2001) %>%
select(gname,nkill) %>%
group_by(gname) %>%
summarise(total = sum(nkill, na.rm = T)) %>%
arrange(desc(total)) %>%
ungroup() %>%
rename(group = gname) %>%
filter(gname != "Unknown")
# group caused most casualties barplot
kill_group <- df %>%
filter(iyear >= 2001) %>%
select(gname,nkill) %>%
group_by(gname) %>%
summarise(total = sum(nkill, na.rm = T)) %>%
arrange(desc(total))
View(kill_group)
# group caused most casualties barplot
kill_group <- df %>%
filter(iyear >= 2001) %>%
select(gname,nkill) %>%
group_by(gname) %>%
summarise(total = sum(nkill, na.rm = T)) %>%
arrange(desc(total) )%>%
ungroup() %>%
rename(group = gname) %>%
filter(gname != "Unknown")
# group caused most casualties barplot
kill_group <- df %>%
filter(iyear >= 2001) %>%
select(gname,nkill) %>%
group_by(gname) %>%
summarise(total = sum(nkill, na.rm = T)) %>%
arrange(desc(total) )%>%
ungroup() %>%
filter(gname != "Unknown")
View(kill_group)
# group caused most casualties barplot
kill_group <- df %>%
filter(iyear >= 2001) %>%
select(gname,nkill) %>%
group_by(gname) %>%
summarise(total = sum(nkill, na.rm = T)) %>%
arrange(desc(total) )%>%
ungroup() %>%
filter(gname != "Unknown") %>%
rename(group = gname)
View(kill_group)
# group caused most casualties barplot
kill_group <- df %>%
filter(iyear >= 2001) %>%
select(gname,nkill) %>%
group_by(gname) %>%
summarise(casualties = sum(nkill, na.rm = T)) %>%
arrange(desc(total) )%>%
ungroup() %>%
filter(gname != "Unknown") %>%
rename(group = gname)
View(kill_group)
# group caused most casualties barplot
kill_group <- df %>%
filter(iyear >= 2001) %>%
select(gname,nkill) %>%
group_by(gname) %>%
summarise(casualties = sum(nkill, na.rm = T)) %>%
arrange(desc(casualties) )%>%
ungroup() %>%
filter(gname != "Unknown") %>%
rename(group = gname)
View(kill_group)
# group caused most casualties barplot
kill_group <- df %>%
filter(iyear >= 2001) %>%
select(gname,nkill) %>%
group_by(gname) %>%
summarise(victims = sum(nkill, na.rm = T)) %>%
arrange(desc(victims) )%>%
ungroup() %>%
filter(gname != "Unknown") %>%
rename(group = gname)
View(kill_group)
# group caused most casualties barplot
kill_group <- df %>%
filter(iyear >= 2001) %>%
select(gname,nkill) %>%
group_by(gname) %>%
summarise(casualties = sum(nkill, na.rm = T)) %>%
arrange(desc(casualties) )%>%
ungroup() %>%
filter(gname != "Unknown") %>%
rename(group = gname)
# number of attacks per year (line plot)
year_attacks <- df %>%
filter(iyear >= 2001) %>%
select(iyear) %>%
group_by(iyear) %>%
count()
View(year_attacks)
# number of attacks per year (line plot)
year_attacks <- df %>%
filter(iyear >= 2001) %>%
select(iyear) %>%
group_by(iyear) %>%
count() %>%
ungroup() %>%
rename(casualties = count)
# number of attacks per year (line plot)
year_attacks <- df %>%
filter(iyear >= 2001) %>%
select(iyear) %>%
group_by(iyear) %>%
count() %>%
ungroup() %>%
rename(casualties = n)
View(year_attacks)
# number of attacks per year (line plot)
year_attacks <- df %>%
filter(iyear >= 2001) %>%
select(iyear) %>%
group_by(iyear) %>%
count() %>%
ungroup() %>%
rename(casualties = n,
year = iyear)
View(year_attacks)
# kills per year together with number of attacks per year
year_kill <- df %>%
filter(iyear >= 2001) %>%
select(iyear,nkill) %>%
group_by(iyear) %>%
summarise(total = sum(nkill,na.rm = T))
View(year_kill)
# number of attacks per year (line plot)
year_attacks <- df %>%
filter(iyear >= 2001) %>%
select(iyear) %>%
group_by(iyear) %>%
count() %>%
ungroup() %>%
rename(attacks = n,
year = iyear)
# kills per year together with number of attacks per year
year_kill <- df %>%
filter(iyear >= 2001) %>%
select(iyear,nkill) %>%
group_by(iyear) %>%
summarise(casualties = sum(nkill,na.rm = T)) %>%
ungroup()
# kills per year together with number of attacks per year
year_kill <- df %>%
filter(iyear >= 2001) %>%
select(iyear,nkill) %>%
group_by(iyear) %>%
summarise(casualties = sum(nkill,na.rm = T)) %>%
ungroup() %>%
rename(year = iyear)
View(year_kill)
View(year_kill)
View(year_attacks)
year_attacks_casualties <- merge(year_attacks,year_kill, by = year)
year_attacks_casualties <- merge(year_attacks,year_kill, by = "year")
View(year_attacks_casualties)
write.csv(year_attacks_casualties,"year_attacks_casualties.csv",row.names = F)
write.csv(casualties_group,"casualties_group.csv",row.names = F)
# group caused most casualties barplot
kill_group <- df %>%
filter(iyear >= 2001) %>%
select(gname,nkill) %>%
group_by(gname) %>%
summarise(casualties = sum(nkill, na.rm = T)) %>%
arrange(desc(casualties) )%>%
ungroup() %>%
filter(gname != "Unknown") %>%
rename(group = gname)
write.csv(casualties_group,"casualties_group.csv",row.names = F)
write.csv(kill_group,"casualties_group.csv",row.names = F)
# number of casualties per country (as map)
kill <- df %>%
filter(iyear >= 2001) %>%
select(country_txt,nkill) %>%
group_by(country_txt) %>%
summarise(casualties = sum(nkill, na.rm = T)) %>%
arrange(desc(casualties)) %>%
rename(country = country_txt) %>%
ungroup()
write.csv(kill,"casualties_country.csv",row.names = F)
# Target subtype
trgt <- df %>%
filter(iyear >= 2001) %>%
group_by(targtype1_txt) %>%
count(sort = T) %>%
na.omit() %>%
rename(count = n,
target = targtype1_txt) %>%
ungroup()
write.csv(trgt,"target_type.csv", row.names = F)
# Attack type
weapons <- df %>%
filter(iyear >= 2001) %>%
group_by(attacktype1_txt) %>%
count(sort = T) %>%
rename(count = n) %>%
ungroup()
write.csv(weapons,"attacktype.csv",row.names = F)
View(weapons)
# Attack type
weapons <- df %>%
filter(iyear >= 2001) %>%
group_by(attacktype1_txt) %>%
count(sort = T) %>%
rename(count = n,
type = attacktype1_txt) %>%
ungroup()
write.csv(weapons,"attacktype.csv",row.names = F)
# group caused most casualties barplot
kill_group <- df %>%
filter(iyear >= 2001) %>%
select(gname,nkill) %>%
group_by(gname) %>%
summarise(casualties = sum(nkill, na.rm = T)) %>%
arrange(desc(casualties) )%>%
ungroup() %>%
filter(gname != "Unknown") %>%
rename(group = gname) %>%
top_n(10,casualties)
library(readxl)
library(dplyr)
# group caused most casualties barplot
kill_group <- df %>%
filter(iyear >= 2001) %>%
select(gname,nkill) %>%
group_by(gname) %>%
summarise(casualties = sum(nkill, na.rm = T)) %>%
arrange(desc(casualties) )%>%
ungroup() %>%
filter(gname != "Unknown") %>%
rename(group = gname) %>%
top_n(10,casualties)
View(kill_group)
write.csv(kill_group,"casualties_group.csv",row.names = F)
View(kill)
View(df)
num <- df %>%
filter(year >= 2001, country_txt == "United States")
library(dplyr)
num <- df %>%
filter(year >= 2001, country_txt == "United States")
num <- df %>%
filter(iyear >= 2001, country_txt == "United States")
View(num)
sum(num,nkill)
names(num)
sum(num,nkill)
?sum
sum(num$nkill)
num <- df %>%
filter(iyear >= 2001, country_txt == "Switzerland")
View(num)
num$summary
View(kill)
count(kill,country)
library(dplyr)
View(kill)
real <- filter(kill, casualties > 0)
View(real)
View(df)
filter(df,iyear == 2012)
real <- filter(df,iyear>=2012)
View(real)
real %>% group_by(gname) %>% count()
real %>% group_by(gname) %>% count() %>% ungroup() %>% top_n(10)
top <- real %>% group_by(gname) %>% count() %>% ungroup() %>% top_n(10)
View(top)
View(trgt)
View(trgt_sub)
